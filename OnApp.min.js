window.app&&window.app.$destroy&&window.app.$destroy(),document.body.classList.add("bg-slate-200");const fixedFull="top-0 left-0 bottom-0 right-0 fixed",fixedRight="top-0  bottom-0 right-0 fixed",rowLg="border-b-[1px] border-salete-100 last:border-0  flex items-center w-full min-h-[88px]",rowLg_lb="w-[75px] text-[#999] p-5",rowLg_lbBlock="w-full text-[#999]",rowLg_Action="\nml-[auto] my-[4px] relative min-h-[76px] h-full w-[88px] flex-[0_0_88px]\nborder-l-[1px] border-slate-100 flex items-center justify-center\ngroup active:bg-blue-500 active:text-white\n",action_x="\nbefore:content-[''] before:w-[70%] before:h-[2px] before:bg-slate-400 \nbefore:absolute before:top-[50%] before:m-[auto] before:rotate-45 before:rounded-lg\n\nafter:content-[''] after:w-[70%] after:h-[2px] after:bg-slate-400\nafter:absolute after:top-[50%] after:m-[auto] after:-rotate-45 after:rounded-lg\n\nactive:bg-blue-500 active:before:bg-white active:after:bg-white\n",action_qr="\nbefore:content-[''] before:w-[10px] before:h-[32px] \nbefore:border-slate-400 before:border-[1px] before:border-r-[0] before:mr-[10px]\ngroup-active:before:border-white\n\nafter:content-[''] after:w-[10px] after:h-[32px]\nafter:border-slate-400 after:border-[1px] after:border-l-[0] after:ml-[10px]\ngroup-active:after:border-white\n",textAction="\nunderline  underline-offset-4 active:text-blue-500 select-none \n",svg_close='\n<svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">\n    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>\n</svg>\n',pending='\n<div class="h-[24px] rounded-lg w-full u1 bg-slate-200 animate-pulse"></div>\n',control="rounded-lg py-1 px-2 border-[1px] h-[42px] flex items-center border-slate-200 w-full my-2";function PlaySound(e){var t=document.createElement("audio");t.setAttribute("src",e),document.body.appendChild(t),t.play()}function textSubsToHtml(e,t,r){var a="";if(Array.isArray(e)){a='<ul class="pl-5 my-3">';var n=r||0;if(t){var i=t&&t.color?t.color:"",o=t.step||0;if(i){var l=i.split("-"),s=l[l.length-1];(s=parseInt(s))&&(s-=n*o,s=Math.max(100,s),l[l.length-1]=s,i=l.join("-"))}}e.forEach((e=>{if(e.text){var r=`<li><div class="${i}">${e.text}</div>`;r+=textSubsToHtml(e.subs,t,n+1),a+=r+="</li>"}})),a+="</ul>"}return a}function textStore(e,t){return new Promise(((e,r)=>{fetch(t).then((e=>e.text())).then((t=>{e(t)}))}))}function parseJSON(e){for(var t=0,r=e.length-1;t<e.length&&"["!=e[t]&&"}"!=e[t];)t++;for(;r>0&&"["!=e[r]&&"}"!=e[r];)r--;if(t>-1&&r>-1){var a=e.substring(t,r);return JSON.parse(a)}return JSON.parse(e)}function isElement(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function vdicTranslate(e){function t(e){var r=[];return isElement(e)&&e.querySelectorAll("li").forEach((e=>{for(var a={text:"",subs:[]},n=!0,i=[],o=0;o<e.children.length;o++){var l=e.children[o];if(n&&i.push(l.innerText),"UL"==l.tagName.toUpperCase()){n=!1;var s=t(l);s&&s.length&&(a.subs=a.subs.concat(s))}}a.text=i.join(" "),0==a.subs.length&&delete a.subs,a.text&&r.push(a)})),r}return new Promise(((r,a)=>{fetch(`https://cser.vn/acaorigin?q=${`https://vdict.com/${e},1,0,0.html`}`,{}).then((e=>e.text())).then((e=>{var a=e.replace("<html","<div").replace("<body","<div").replace("</html>","</div>").replace("</html","</div>").replace("<img","<div").replace("<link","<div"),n=document.createElement("div");n.style.display="none",n.innerHTML=a;var i=n.querySelector(".pronounce"),o={voice:i?i.innerText:null,meaning:[]};n.querySelectorAll(".phanloai").forEach((e=>{for(var r={text:e.innerText,subs:[]},a=e.nextSibling;a&&(!a.classList||!a.classList.contains("phanloai"));){if(a.tagName&&"UL"==a.tagName.toUpperCase()){var n=t(a);n&&n.length&&(r.subs=r.subs.concat(n))}a=a.nextSibling}0==r.subs.length&&delete r.subs,o.meaning.push(r)})),n.remove(),r(o)})).catch((e=>{a(e)}))}))}function QrCode(){return new Promise(((e,t)=>{app21.prom("OPEN_QRCODE").then((t=>{var r=t.data;e(r)})).catch((t=>{e(null)}))}))}document.body.innerHTML=`\n<div id="app" class="w-full h-full  overflow-auto">\n\n    \n\n    <div v-bind:data-show="menuShow" class="flex h-[48px] border-b-[1px] border-slate-200 items-center bg-white data-[show=true]:bg-blue-100">\n        <div  class="group h-full w-[48px] flex items-center justify-center relative active:bg-blue-500 "\n            v-on:click="menuShow = !menuShow">\n            <span class="h-[3px] bg-slate-500 absolute w-[28px] top-[14px] group-active:bg-white"></span>\n            <span class="h-[3px] bg-slate-500 absolute w-[28px] top-[22px] group-active:bg-white"></span>\n            <span class="h-[3px] bg-slate-500 absolute w-[28px] top-[30px] group-active:bg-white"></span>\n        </div>\n        <div v-for="(m) in modulesActive()" \n             v-html="m.text" class="grow truncate h-full flex items-center "></div>\n        <div v-for="(m) in modulesActive()" \n             v-if="m.filterProps && m.filterProps.length"\n             v-on:click=" filterPropsShow = !filterPropsShow"\n              class="w-[48px] truncate h-full flex items-center justify-center bg-slate-100">\n              FT[{{m.filterProps.filter(z=>z.value).length}}]\n        </div>\n    </div>\n\n    \x3c!--module active--\x3e\n    <div class="h-[calc(100vh_-_48px)] w-full  overflow-auto relative" \n         v-for="(m) in modulesActive()"\n         v-on:scroll="scrollItem($event)">\n        \n        <div v-bind:class="'w-full h-[' + (m.scrollHeight || 0) + 'px]'">\n            <div v-for="(x,i) in viewData(m)" \n                v-if="   scrollY1 - wh() <= i* m.itemHeight && i* m.itemHeight <= scrollY2 + wh()"\n                v-bind:class="'absolute p-3 pb-0 last:pb-3 w-full h-['+ m.itemHeight   +'px] top-[' + (i* m.itemHeight)+'px]'">\n                <div class="py-3 px-5 w-full flex rounded-lg bg-white data-[active=true]:bg-blue-500 data-[active=true]:text-white data-[active=true]:drop-shadow" \n                       \n                        v-bind:data-active="x == m.itemActive">\n                    <span  class="inline-block min-w-[75px] active:bg-yellow-200" v-on:click="m.setActive && m.setActive(x)" v-html="m.getHtml ? m.getHtml(x): ''"></span>\n                    <span v-if="m.dataAction" class="ml-[auto] active:text-blue-500" v-on:click="m.dataAction(x)">\n                        ...\n                    </span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!--menu show--\x3e\n    <div v-if="menuShow" class="z-[9] fixed bg-white/80 top-[48px] left-0 bottom-0 right-0" v-on:click="menuShow = false"></div>\n    <div v-if="menuShow" class="z-[10] fixed top-[48px] left-0 bottom-0 w-[80%] drop-shadow-2xl bg-white">\n        <div v-for="(m) in modules"\n            v-on:click="modulesActive(m); menuShow= false"\n            class="py-5 px-[48px] truncate border-b-[1px] border-slate-100 last:border-0 cursor-default"\n            v-html="m.text">\n        </div>\n    </div>\n\n    \x3c!-- word detail --\x3e\n    <div v-if="wordActive" class="z-[10] relative">\n        <div class="${fixedRight} w-[80%] bg-white drop-shadow-2xl overflow-auto" v-for="w in [wordActive]">\n            <div class="bg-slate-200 h-[6px] rounded-lg animate-pulse absolute left-3 right-3 top-[10px]" v-if="wordMeaning"></div>\n            <div class="${rowLg} data-[head=true]:bg-slate-100 \n                        data-[head=true]:text-blank data-[head=true]:font-bold data-[head=true]:border-slate-200 data-[head=true]:border-b-[2px]\n                        group"\n                 v-for="(p) in wordProps" \n                 v-bind:data-head="p.head" >\n                <div class="p-5 grow flex flex-col" v-on:click="p.onClick && p.onClick()">\n                    <div v-if="!p.head" class="${rowLg_lbBlock} text-[12px]">{{p.text || p.name}} {{p.textInput ? '[_]':''}}</div>\n                    <div v-bind:data-head="p.head" v-if="!p.render"  class="data-[head=true]:text-4xl flex break-all" v-html="p.getValue ? p.getValue(w): w[p.name]"></div>\n                    <div v-else="p.render" class="w-full mt-3 max-h-[30vh] overflow-auto" v-html="p.render()"></div>\n                </div>\n                \n                \n                \n                <div v-if="p.close" v-on:click="p.close()" class="${rowLg_Action}">\n                    ${svg_close}\n                </div>\n            </div>\n\n            <div class="absolute bottom-0 right-0 left-0 bg-white border-t-[1px] p-5 bg-slate-100" \n            v-if="wordPropEdit" v-for="e in [wordPropEdit]">\n                <textarea \n                    v-bind:value="wordActive[e.name]" \n                    v-on:change="wordPropEditValue = $event.target.value"\n                    class="w-full border-[1px] bg-[#000] text-white rounded-lg p-2"\n                    placeholder="input..."\n                    >\n                </textarea>\n                <div class="flex justify-between">\n                    <div class="${textAction}" v-on:click="wordPropEdit = null; wordPropEditValue= null">Cancel</div>\n                    <div class="${textAction}" v-on:click="wordPropEdit = null;set(wordActive, e.name, wordPropEditValue);wordPropEditValue=null; store()">OK</div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    \x3c!--filterProps--\x3e\n    <div v-if="filterPropsShow" class="${fixedFull} z-[9]" v-on:click="filterPropsShow= false"></div>\n    <div v-if="filterPropsShow" class="filterProps ${fixedRight} top-[48px] max-w-[80%] w-[300px] bg-white drop-shadow-2xl overflow-auto z-[10]">\n        <div v-for="(m) in modulesActive()"\n            class="w-full max-h-[calc(100%_-_48px)] min-h-[100px] overflow-auto">\n            \n            \n\n            <div v-for="(p) in m.filterProps" class="p-3 border-b-[1px] border-slate-200 last:border-0">\n                <div>{{p.name}}</div>\n                <div v-if="p.type == 'select'">\n                    <select class="${control}" v-model="p.value">\n                        <option value="">--Chọn--</option>\n                        <option v-for="(op) in p.options" v-bind:value="typeof op == 'string' ? op: op.value">{{typeof op == 'string' ? op: op.text}}</option>\n                    </select>\n                </div>\n                <div v-else="">\n                    <input type="text" class="${control}" v-bind:placeholder="p.placeholder" v-model="p.value" />\n                </div>\n            </div>\n\n        </div>\n        <div class="h-[48px] border-t-[1px] border-slate-200 flex items-center justify-between px-3">\n            <div class="${textAction}" v-on:click="filterPropsReset()">Reset</div>\n            <div class="${textAction}" v-on:click="filterPropsSet()">Set</div>\n    \n        </div>\n    </div>\n\n    \x3c!--phrase--\x3e\n    <div v-if="phraseShow" class="phrase ${fixedFull} !top-[48px] bg-white z-[1]">\n        <div class="h-[32px] border-slate-100 border-b-[1px] flex px-3">\n            <div v-if="!phrase.edit" v-on:click="phraseQrCode()" class="h-[32px] flex items-center px-3 ${textAction}">[QR]</div>\n            <div v-if="!phrase.edit" v-on:click="phrase.edit = true" class="h-[32px] flex items-center px-3 ${textAction}">[Edit]</div>\n            <div v-if="phrase.edit" v-on:click="phrase.edit = false" class="h-[32px] flex items-center px-3 ${textAction}">[Đóng Edit]</div>\n            <div v-on:click="phraseShow = false" class="h-[32px] flex items-center px-3 ${textAction} ml-[auto]">[Đóng]</div>\n        </div>\n\n        <div class="p-3 h-[calc(100%_-_32px)]">\n            <div v-if="phrase.edit" class="h-full">\n                <textarea class="h-full p-3 rounded-lg w-full border-slate-100 bg-gray-100" v-model="phraseText"></textarea>\n            </div>\n            <div v-else class="h-full overflow-auto">\n                <span v-for="word in phraseWords()" class="mr-3 last:mr-0 hover:underline active:text-blue-500" \n                      v-on:click="phraseViewWord(word)" \n                      v-html="word"></span>\n            </div>\n        </div>\n\n    </div>\n</div>\n`,window.console=console;var data={modules:[{text:"Top 3000 words",name:"top3000word_en",loading:!0,data:[],storeKey:"top3000word_en",onLoad(){var e=this;e.loading&&app21.prom("TEXT",{name:e.storeKey}).then((t=>{try{var r=JSON.parse(t.data);Array.isArray(r)&&(e.data=r)}catch{}if(0==e.data.length){app21.prom("DOWNLOAD_URL","https://raw.githubusercontent.com/tienhungezs/language/main/en.3000.json").then((t=>{t.data.contentType.split(";")[0];var r=t.data.text;try{var a=JSON.parse(r);Array.isArray(a)&&(e.data=a,e.scrollHeight=e.data.length*e.itemHeight,update())}catch{}e.loading=!1})).catch((e=>{}))}else e.loading=!1}))},active:!0,store(){app21.prom("TEXT",{name:this.storeKey,content:JSON.stringify(this.data)}).then((e=>{}))},getHtml:e=>e.w,setActive(e){data.wordActive=e,this.itemActive=e},itemActive:null,itemHeight:62,filterProps:[{name:"key",value:"",placeholder:"Begin search, * contain...",onItem(e){var t=this.value;return!t||((t=t.toLowerCase()).startsWith("*")?(t=t.substring(1),e.w.indexOf(t)>-1):e.w.toLowerCase().startsWith(t))}}],scrollHeight:0},{text:"Top 1000 english-phrases(englishspeak.com)",name:"top1000phrases_en",loading:!0,data:[],dataAction(e){data.phraseText=e.phrase,data.phraseShow=!0},storeKey:"top1000phrases_en",onLoad(){var e=this;e.loading&&app21.prom("TEXT",{name:e.storeKey}).then((t=>{try{var r=JSON.parse(t.data);Array.isArray(r)&&(e.data=r)}catch{}if(0==e.data.length){app21.prom("DOWNLOAD_URL","https://raw.githubusercontent.com/tienhungezs/language/main/en.1000.phrases.json").then((t=>{t.data.contentType.split(";")[0];var r=t.data.text;try{var a=JSON.parse(r);Array.isArray(a)&&(e.data=a,e.scrollHeight=e.data.length*e.itemHeight,update())}catch{}e.loading=!1})).catch((e=>{}))}else e.loading=!1}))},getHtml:e=>e.phrase,setActive(e){this.itemActive=e},itemActive:null,itemHeight:75,filterProps:[{name:"key",value:"",onItem(e){return e.phrase.indexOf(this.value)>-1}},{name:"type",type:"select",value:"",options:["Common expressions","Greetings","Travel, directions","Numbers and money","Location","Phone/internet/mail","Time and dates","Accommodations","Dining","Making friends","Entertainment","Shopping","Communication difficulties","Emergency and health","Cultural expressions/terms","General questions","Work","Weather","Verbs","Miscellaneous"],onItem(e){return!this.value||e.category==this.value}}],scrollHeight:0}],modulesActive(e){return e&&this.modules.forEach((t=>{Vue.set(t,"active",t.text==e.text),t.text==e.text&&(document.title=t.text,t.onLoad())})),this.modules.filter((e=>e.active))},moduleLoad(e){this.modules.forEach((t=>{t.name==e&&t.onLoad()}))},moduleData(e,t){this.modules.every((r=>r.name!=e||(t(r.loading,r.data),!1)))},menuShow:!1,wordActive:null,wordProps:[{name:"w",head:!0,close(){data.wordActive=null}},{name:"voice"},{name:"meaning",render:()=>textSubsToHtml(data.wordActive.meaning,{color:"text-gray-900",step:200})},{name:"top_phrases",render(){var e=[],t=!1;return data.wordActive&&data.moduleData("top1000phrases_en",((r,a)=>{t=!r,e=a.filter((e=>{var t=data.wordActive.w.toLowerCase();return t.length<3?(e.words||(e.words=e.phrase.toLowerCase().split(" ")),e.words.filter((e=>e==t)).length):`${e.phrase}`.toLowerCase().indexOf(data.wordActive.w)>-1}))})),e.length>0?e.map((e=>`<div class="p-1">${e.phrase}</div>`)).join(""):t?"(none)":pending}},{name:"top_sentences",render:()=>pending}],wordPropEdit:null,wordPropEditValue:null,wordMeaning:!0,filterPropsShow:!1,filterPropsReset(){this.modules.forEach((e=>{e.active&&e.filterProps&&e.filterProps.forEach((e=>{e.value=""}))}))},filterPropsSet(){this.modules.forEach((e=>{if(e.active&&e.filterProps){var t=0;e.data.forEach((r=>{delete r.filterShow;var a=!0;e.filterProps.forEach((e=>{a=!!e.onItem(r)&&a})),Vue.set(r,"filterShow",a),a&&t++})),e.scrollHeight=t*e.itemHeight}})),this.filterPropsShow=!1},qrOpen(e){app21.prom("OPEN_QRCODE").then((t=>{var r=t.data;e&&e(r)}))},set(e,t,r,a){Vue.set(e,t,r),a&&this.store()},scrollY1:0,scrollY2:window.innerHeight-48,scrollItem(e){var t=e.target.scrollTop,r=t+e.target.clientHeight;this.scrollY1=t,this.scrollY2=r},getModuleItems(e){var t=e.itemHeight||62,r=this.scrollY1-window.innerHeight,a=this.scrollY2+window.innerHeight;return e.data.filter(((e,n)=>r<=n*t&&n*t<=a))},wh:()=>window.innerHeight,store(){this.modules.forEach((e=>{e.active&&e.store&&e.store()}))},getScollHeight:e=>e&&Array.isArray(e.data)?e.data.filter((e=>!1!==e.filterShow)).length*e.itemHeight:0,viewData:e=>e&&Array.isArray(e.data)?e.data.filter((e=>void 0===e.filterShow||!0===e.filterShow)):[],phraseShow:!0,phraseText:"Everything is ready.",phrase:{edit:!0},phraseSpecialChar:e=>'~!@#$%^&*()_-=+<,>.:;""{[}]|\\'.indexOf(e)>-1,phraseWords(){for(var e=[],t=0,r=this.phraseText,a="";t<r.length;){var n=r[t];" "==n?(a&&e.push(a),a=""):this.phraseSpecialChar(n)?(a&&e.push(a),a="",e.push(n)):a+=n,t++}return a&&e.push(a),e},phraseViewWord(e){this.phraseSpecialChar(e)||(this.wordActive={w:e})},phraseQrCode(){QrCode().then((e=>{data.phraseText=e||""}))}},app=new Vue({el:document.querySelector("#app"),data:data,mounted(){data.modules.forEach((e=>{e.active&&e.onLoad()}))},watch:{wordActive(e){if(e){data.moduleLoad("top1000phrases_en");e.w[0];data.wordMeaning=!0,vdicTranslate(e.w).then((t=>{Vue.set(e,"voice",t.voice),Vue.set(e,"meaning",t.meaning),data.wordMeaning=!1}))}},phraseShow(e){e&&(data.wordActive=null)}}});